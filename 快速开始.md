# LibreTranslate 云服务 - 快速开始指南

## 📦 项目概述

这是一个准备部署到 Zeabur 云端的 LibreTranslate 翻译服务，专为 Musa 浏览器设计。

## 🎯 当前状态

✅ 所有必需文件已创建  
✅ 项目结构已准备就绪  
⏳ 等待上传到 GitHub  
⏳ 等待部署到 Zeabur

## 📁 项目文件说明

| 文件 | 用途 |
|------|------|
| `app.py` | 主应用程序，启动 LibreTranslate 服务 |
| `requirements.txt` | Python 依赖包列表 |
| `Procfile` | Zeabur/Heroku 部署配置 |
| `runtime.txt` | Python 版本指定 |
| `Dockerfile` | Docker 容器配置 |
| `zeabur.json` | Zeabur 平台配置 |
| `README.md` | 项目说明文档 |
| `DEPLOY.md` | 详细部署指南 |
| `test_api.sh` | API 测试脚本 |
| `.gitignore` | Git 忽略文件配置 |

## 🚀 三步部署流程

### 步骤 1️⃣：上传到 GitHub

**选项 A - 使用提供的脚本（推荐）**

1. 打开终端
2. 进入项目目录：
   ```bash
   cd /Users/enithz/Desktop/translation
   ```
3. 运行上传脚本：
   ```bash
   bash upload_to_github.sh
   ```
4. 输入你的 GitHub 用户名和 Personal Access Token

**选项 B - 使用 GitHub Desktop**

1. 打开 GitHub Desktop
2. File → Add Local Repository
3. 选择 `/Users/enithz/Desktop/translation`
4. Publish Repository

**选项 C - 手动命令行**

```bash
cd /Users/enithz/Desktop/translation
git init
git add .
git commit -m "Initial commit: LibreTranslate service"
git remote add origin https://github.com/zt6453928/translation.git
git branch -M main
git push -u origin main
```

### 步骤 2️⃣：部署到 Zeabur

1. 访问 [Zeabur](https://zeabur.com)
2. 点击 "New Project"
3. 选择 "Deploy from GitHub"
4. 选择 `zt6453928/translation` 仓库
5. Zeabur 会自动检测并开始部署
6. 等待 3-5 分钟完成部署

### 步骤 3️⃣：更新 Musa 配置

部署完成后，你会获得一个服务 URL，例如：
```
https://translation-xxxx.zeabur.app
```

然后更新 Musa 浏览器的配置：

1. 打开 `/Users/enithz/Desktop/Musa/Musa/TranslationManager.swift`
2. 找到 `translateServiceURL` 这一行
3. 修改为你的 Zeabur 服务地址：
   ```swift
   private let translateServiceURL = "https://translation-xxxx.zeabur.app"
   ```
4. 重新编译 Musa 浏览器

## 🧪 测试服务

部署完成后，可以使用测试脚本验证：

```bash
# 使用你的实际服务 URL
bash test_api.sh https://translation-xxxx.zeabur.app
```

或者手动测试：

```bash
# 测试翻译
curl -X POST "https://your-service.zeabur.app/translate" \
  -H "Content-Type: application/json" \
  -d '{
    "q": "你好，世界！",
    "source": "zh",
    "target": "en",
    "format": "text"
  }'
```

## 📊 环境变量配置（可选）

在 Zeabur 项目设置中，可以配置：

- `LT_PORT`: 5000（默认）
- `LT_HOST`: 0.0.0.0（默认）
- `LT_CHAR_LIMIT`: 5000（默认）
- `LT_REQ_LIMIT`: 1000（默认）
- `LT_API_KEYS`: 留空（可选，用于限制访问）

## 💰 费用说明

- **Zeabur 免费版**：
  - ✅ 免费
  - ⚠️ 有使用限制（适合个人使用）
  - ⚠️ 可能有冷启动延迟

- **Zeabur 付费版**：
  - 💰 从 $5/月起
  - ✅ 无限制使用
  - ✅ 无冷启动
  - ✅ 更好的性能

## 🆘 常见问题

### Q: 上传到 GitHub 时要求输入密码？
A: 不要输入你的 GitHub 密码，而是使用 Personal Access Token：
1. 访问 https://github.com/settings/tokens
2. 点击 "Generate new token (classic)"
3. 选择 `repo` 权限
4. 生成并复制 token
5. 在命令行中使用 token 而不是密码

### Q: Zeabur 部署失败？
A: 检查：
1. GitHub 仓库是否公开
2. 所有文件是否正确上传
3. 查看 Zeabur 部署日志

### Q: 服务响应很慢？
A: 这是正常的，因为：
1. 首次请求时会下载翻译模型
2. 免费版可能有冷启动
3. 建议升级到付费版以获得更好性能

### Q: 如何停止本地的 LibreTranslate 服务？
A: 
```bash
# 查找进程
ps aux | grep libretranslate

# 停止进程
pkill -f libretranslate
```

## 📚 相关文档

- 📖 [README.md](README.md) - 项目说明
- 🚀 [DEPLOY.md](DEPLOY.md) - 详细部署指南
- 📤 [UPLOAD_INSTRUCTIONS.md](UPLOAD_INSTRUCTIONS.md) - 上传指令
- 🧪 [test_api.sh](test_api.sh) - API 测试脚本

## 🎉 完成后的效果

部署成功后：
1. ✅ Musa 浏览器可以使用云端翻译服务
2. ✅ 不需要本地运行 LibreTranslate
3. ✅ 翻译服务 24/7 在线
4. ✅ 可以在任何地方使用
5. ✅ 支持多设备共享

## 📞 需要帮助？

如果遇到问题：
1. 查看 [DEPLOY.md](DEPLOY.md) 获取详细步骤
2. 查看 [Zeabur 文档](https://zeabur.com/docs)
3. 在 GitHub 仓库创建 Issue

---

**准备好了吗？让我们开始部署吧！** 🚀
